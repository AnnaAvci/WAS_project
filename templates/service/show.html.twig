{% extends 'base.html.twig' %}

{% block title %}Photoshoot info{% endblock %}

{% block body %}
    <div class="wrapper">
        <h1 class="page-title">{{service}}   
            {# only the owner can edit/delete a service #}
            <div class="edit-delete">
                {% if app.user.id == service.owner.id %}
                    <a href="{{path('update_service', {'id':service.id}) }}"><i class="fa-solid fa-pencil"></i></a> <br>
                    <a href="{{path('delete_service', {'id':service.id}) }}"><i class="fa-solid fa-trash"></i></a> 
                {% endif %}
            </div> 
        </h1>


    {#  Display the name of the shoot and the picture gallery #}
        <div class="all-cards">
            {% for photoService in service.photoServices %}
                <div class="card">
                    <img src={{ asset("uploads/" ~ photoService.namePhoto )}} width="300" height="400" alt >
                </div>
            {% endfor %}
        </div>

        
        {# All information including comments #}
        <div class="post-info">
                <p>
                    <strong>{{service.priceService}} $ / hour</strong> 
                </p>
                <p>
                    <strong>{{service.cityService}}, {{service.countryService}}</strong> 
                </p>
                <p>
                    <img src={{ asset("uploads/" ~ service.owner.pictureUser )}} width="30" height="30" alt class="profile-picture">
                    {#  Service owner and bio #}
                    <strong>{{service.owner}}</strong>
                </p>
            
                <p> 
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Minus corporis enim, magni asperiores, possimus dolores recusandae earum iste laboriosam aperiam dolore fugit, veniam blanditiis a eveniet odit quidem alias saepe.
                Eaque, quisquam. Eligendi, similique corrupti ex quia soluta libero voluptate consequuntur nihil tempore itaque aliquam est dicta voluptates ipsum quo rem officiis quos. Pariatur non asperiores quae animi, possimus minus.
                Aliquam, eius deserunt sint cum non aliquid, illum voluptatum temporibus repellat recusandae beatae blanditiis odio, laborum unde voluptates placeat ea? Aperiam sit expedita vitae quibusdam, quis nisi quas impedit fuga.
                </p>
        
            {# Comments #}
            <div class="post-comments">
            <h2>Reviews:</h2>
            {% for commentUserService in service.commentUserServices %}
                
                   {% if not commentUserService.commenter %}
                        <strong>Deleted account</strong>
                    {% else %}
                         <img src={{ asset("uploads/" ~ commentUserService.commenter.pictureUser )}} width="30" height="30" alt class="profile-picture">
                         <strong>{{commentUserService.commenter.firstName}}</strong>
                        
                    {% endif %}
                {{commentUserService.dateComment | date('d-m-Y H:i')}} <br>
                  <div class="flex">
                        {{commentUserService.textComment}} <br>
                         
                        {% if not commentUserService.commenter %}

                        {% elseif app.user and app.user.id == commentUserService.commenter.id %}
                            <a href="{{path('delete_comment', {'id':commentUserService.id}) }}"><i class="fa-solid fa-trash" style="margin-left:1em"></i> </a>
                        {% endif %}
                    </div>
                {% endfor %}
                {% if app.user %}
                    <strong>Add comment:</strong>
                        {{form_start(formCommentUserService)}}
                        {{form_row(formCommentUserService.text_comment)}}
                        {{form_row(formCommentUserService.Submit, {'attr': {'class': 'button-small'}})}}
                        {{form_end(formCommentUserService)}} <br>
                    <strong>Book this photoshoot:</strong>
                        {{form_start(formServiceBook)}}
                        {{form_row(formServiceBook.message)}}
                        {{form_row(formServiceBook.dateStart)}}
                        {{form_row(formServiceBook.dateEnd)}}
                        {{form_row(formServiceBook.Submit, {'attr': {'class': 'button-small'}})}}
                        {{form_end(formServiceBook)}} <br>
                {% endif %}
            </div>
    </div> 
    </div>
{% endblock %}