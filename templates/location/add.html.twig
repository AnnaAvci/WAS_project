{% extends 'base.html.twig' %}

{% block title %}
    {% if isUpdate %}
       Update location 
    {% else %}
        Add a location
    {% endif %}
{% endblock %}

{% block body %}
    <div class="wrapper">
        {% if isUpdate %}
            <h1>Update location</h1>
        {% else %}
            <h1>Add a location </h1> 
        {% endif %}
        


        <div class="form">

            {{form_start(formLocation)}}
            {{form_row(formLocation.name_location)}}
            {{form_row(formLocation.country_location)}}
            {{form_row(formLocation.city_location)}}
            {{form_row(formLocation.postcode_location)}}
            {{form_row(formLocation.price_location)}}
            {{form_row(formLocation.photoLocation)}}
            {{form_end(formLocation)}}

            

            {# check if the route is for modifying displays photos added previously #}
            {% if app.request.attributes.get('_route') == 'update_location' %}
                <strong>Edit Photos of your property</strong>

                {% for photoLocation in location.photoLocations %}
                    <div>
                        <img src="{{ asset('uploads/'~ photoLocation.namePhoto)}}" alt = "photo" width="300">
                        <a href="{{path('location_delete_photoLocation', {'id':photoLocation.id}) }}" class="btn btn-link" 
                        data-delete data-token="{{csrf_token('delete'~ photoLocation.id)}}"> Delete </a>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
        
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/img.js') }}"></script>
{% endblock %}