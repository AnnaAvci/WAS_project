{% extends 'base.html.twig' %}

{% block title %}My reservations{% endblock %}

{% block body %}

<h1>My reservations</h1>

{% if app.user %}
    {% if is_granted('ROLE_USER') %}
            <h2>My reservations</h2>
            <strong>Locations</strong>
            <table class="table">
                <thead>
                    <th>Location</th>
                    <th>Host</th>
                    <th>From</th>
                    <th>To</th>
                    <th>Message</th>
                    <th>Status</th>
                </thead>
                <tbody>
                    {% for bookLocation in user.bookLocations %}
                            <tr>
                                <td>{{bookLocation.location}} </td> 
                                <td><a href="{{path('show_user', {'id':bookLocation.location.ownerLocation.id}) }}">{{bookLocation.location.ownerLocation}} </a></td> 
                                <td>{{bookLocation.dateStart | date('d-m-Y')}}</td> 
                                <td>{{bookLocation.dateEnd | date('d-m-Y')}}</td> 
                                <td>{{bookLocation.message}}</td>  
                                {% if bookLocation.isAccepted == 0 %}
                                    <td> Request pending </td> 
                                {% elseif bookLocation.isAccepted == 1 %}
                                    <td> Request accepted </td>
                                {% else %}
                                    <td> Request declined </td>
                                {% endif %}
                            </tr>   
                        {% endfor %}
                </tbody>
            </table>


            <strong>Photoshoots</strong>
        <table class="table">
            <thead>
                <th>Photoshoot</th>
                <th>Photographer</th>
                <th>From</th>
                <th>To</th>
                <th>Message</th>
                <th>Status</th>
            </thead>
            <tbody>
                {% for bookService in user.bookServices %}
                        <tr>
                            <td>{{bookService.service}} </td> 
                            <td><a href="{{path('show_user', {'id':bookService.service.providerService.id}) }}">{{bookService.service.providerService}} </a></td> 
                            <td>{{bookService.dateStart | date('d-m-Y')}}</td> 
                            <td>{{bookService.dateEnd | date('d-m-Y')}}</td> 
                            <td>{{bookService.message}}</td> 
                            {% if bookService.isAccepted == 0 %}
                                 <td> Request pending </td> 
                            {% elseif bookService.isAccepted == 1 %}
                                 <td> Request accepted </td>
                            {% else %}
                                 <td> Request declined </td>
                            {% endif %}
                        </tr>   
                {% endfor %}
            </tbody>
            </table> <br>

        {% endif %} 

{% endif %}

{% endblock %}
