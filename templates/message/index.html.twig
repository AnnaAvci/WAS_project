{% extends 'base.html.twig' %}

{% block title %}Messages{% endblock %}

{% block body %}

                <h1>Inbox({{ app.user.received|length }})</h1>
        <div class="messages">  

            <a href="{{path("sent",{id: user.id})}}" class="btn">Sent messages</a>

            <table class="table table-striped message-table">
                <thead>
                <tr>
                    <th>From</th>
                    <th>Date</th>
                    <th>Message</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                    <tr>
                        {% for message in app.user.received %}
                    {% set bold = "" %}
                    {% if message.isRead == 0 %}
                        {% set bold = "fw-bold" %}
                    {% endif %}

                    <td>{{ message.sender.firstName }}</td>
                    <td>{{ message.createdAt|date }}</td>
                    <td><a href="{{ path("read", {id: message.id}) }}">{{ message.text }}</a></td>
                    <td><a href="{{ path("delete", {id: message.id}) }}"><i class="fa fa-trash" aria-hidden="true"></i></a></td>
                    </tr>
                {% endfor %}
                
                </tbody>
            </table>
                <h2>New message</h2>
                {{form(messageForm)}}

       </div>  
{% endblock %}


