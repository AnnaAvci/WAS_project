{% block body %}
	

{% for location in locations %}

	<a class="" href="{{ path('show_location', {'id': location.id }) }}">

	<div class="card-and-desc">
		<div class="card">
			<img src={{ asset("uploads/" ~ location.photoLocations[0].namePhoto )}} alt="location" />
		</div>
		<h3 class="h3">
			{{location.nameLocation}}
			<br />
		{{location.priceLocation}} $ per hour
		<a href="{{path("location_like", {'id': location.id})}}" class="btn btn-link js-like">
				<span class="js-likes">{{location.likes | length }}</span>

				{% if app.user and location.isLikedByUser(app.user) %}
					<i class="fa-solid fa-heart"></i>
				{% else %}
					<i class="fa-regular fa-heart"></i>
				{% endif %}
			</a>
		</h3>
	</div>
	</a> 

{% endfor %}

{% endblock %}

{% block javascripts %}
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script>

        /*function onClickBtnLike() {
            //event.preventDefault();

			console?log("HELLO");

            const url = this.href;
            const spanCount = this.querySelector('span.js-likes');
            const icone = this.querySelector('i');

            vraiKadir(url, spanCount, icone);
        }

		async function vraiKadir(url, spanCount, icone){
			await axios.get(url).then(function(response) {
            	spanCount.textContent = response.data.likes;
				if (icone.classList.contains('fa-solid')) {
					icone.classList.replace('fa-solid', 'fa-regular')
				} else {
					icone.classList.replace('fa-regular', 'fa-solid');
				}
            }).catch(function(error) {
				if (error.response.status === 403) {
					window.alert("Please log in to like a post")
            	}
            });
		} 

		document.querySelectorAll('a.js-like').forEach(function(link) {
			link.addEventListener('click', onClickBtnLike);
		})*/
	</script>
{% endblock %}
